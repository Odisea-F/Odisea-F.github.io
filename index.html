<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Oráculo de Odisea Finanzas</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0a0a1a;
            background-image:
                radial-gradient(circle at 15% 50%, rgba(173, 216, 230, 0.1), transparent 30%),
                radial-gradient(circle at 85% 30%, rgba(221, 160, 221, 0.1), transparent 40%);
            overflow: hidden;
        }
        .font-cinzel {
            font-family: 'Cinzel', serif;
        }
        #chat-container {
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            background-color: rgba(10, 10, 26, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .oraculo-message {
            background-color: rgba(45, 35, 80, 0.5);
            border-left: 3px solid #c9b0ff;
        }
        .user-message {
            background-color: rgba(30, 41, 59, 0.7);
            border-right: 3px solid #67e8f9;
        }
        #userInput:focus {
            box-shadow: 0 0 0 2px #c9b0ff;
        }
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
        }
        ::-webkit-scrollbar-thumb {
            background: #c9b0ff;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #a881ff;
        }
        #astrolabio {
            transition: transform 1s ease-in-out;
        }
    </style>
</head>
<body class="flex flex-col items-center justify-center h-screen text-white p-4">

    <div id="chat-container" class="w-full max-w-2xl h-full max-h-[90vh] rounded-2xl shadow-2xl flex flex-col">
        
        <div class="p-6 border-b border-white/10 flex items-center space-x-4">
            <div id="astrolabio-container" class="w-16 h-16 flex-shrink-0">
                 <!-- Astrolabio SVG Icon -->
                <svg id="astrolabio" viewBox="0 0 100 100" class="w-full h-full">
                    <defs>
                        <filter id="glow">
                            <feGaussianBlur stdDeviation="1.5" result="coloredBlur"/>
                            <feMerge>
                                <feMergeNode in="coloredBlur"/>
                                <feMergeNode in="SourceGraphic"/>
                            </feMerge>
                        </filter>
                    </defs>
                    <circle cx="50" cy="50" r="48" fill="none" stroke="#a881ff" stroke-width="1.5"/>
                    <circle cx="50" cy="50" r="38" fill="none" stroke="#c9b0ff" stroke-width="1"/>
                    <circle cx="50" cy="50" r="28" fill="none" stroke="#c9b0ff" stroke-width="1"/>
                    <circle id="gem" cx="50" cy="50" r="10" fill="#c9b0ff" filter="url(#glow)"/>
                    <path d="M50 2 L50 12 M98 50 L88 50 M50 98 L50 88 M2 50 L12 50" stroke="#c9b0ff" stroke-width="1.5"/>
                    <path d="M20 20 L30 30 M80 20 L70 30 M20 80 L30 70 M80 80 L70 70" stroke="#c9b0ff" stroke-width="1"/>
                </svg>
            </div>
            <div>
                <h1 class="text-2xl font-bold font-cinzel text-transparent bg-clip-text bg-gradient-to-r from-purple-300 to-cyan-300">Oráculo de Odisea</h1>
                <p class="text-sm text-purple-200/80">Tu guía en la travesía financiera.</p>
            </div>
        </div>

        <div id="chat-box" class="flex-1 p-6 overflow-y-auto space-y-4">
            <!-- Los mensajes del chat se agregarán aquí -->
        </div>

        <div class="p-4 border-t border-white/10">
            <div class="flex space-x-3">
                <input type="text" id="userInput" class="flex-1 bg-slate-800 border border-slate-600 rounded-lg px-4 py-2 text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-purple-500 transition-shadow" placeholder="Escribe tu pregunta aquí...">
                <button id="sendButton" class="bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white font-bold py-2 px-5 rounded-lg shadow-lg transition-all transform hover:scale-105">
                    Enviar
                </button>
            </div>
        </div>
    </div>

    <script>
        const chatBox = document.getElementById('chat-box');
        const userInput = document.getElementById('userInput');
        const sendButton = document.getElementById('sendButton');
        const astrolabio = document.getElementById('astrolabio');

        // --- Lógica del Oráculo (El "Alma" del Chatbot) ---
        function getOraculoResponse(input) {
            const pregunta = input.toLowerCase().trim();

            if (!pregunta) {
                return null; // No responder si no hay pregunta
            }
            
            // --- Base de Conocimiento del Oráculo ---
            if (pregunta.includes("hola") || pregunta.includes("saludos")) {
                return "¡Hola, navegante! Soy el Oráculo de Odisea. ¿Qué misterios financieros deseas desvelar hoy? Si no sabes por dónde empezar, escribe 'ayuda'.";
            }
            if (pregunta.includes("ayuda") || pregunta.includes("temas")) {
                return "Los astros me permiten hablar sobre estos temas: Presupuesto (y métodos como 50/30/20, Kakebo, FIRE, Minimalismo), Ahorro (formal e informal), Inversión, Deuda, Riesgo, Metas, Buró de Crédito, CAT y GAT, Interés Compuesto, Fórmulas (Pago, VF, VP) y Seguridad contra Fraudes.";
            }
            if (pregunta.includes("kakebo")) {
                return "Kakebo es un estilo de vida cuya filosofía radica en hacerse consciente de todos los gastos que se realizan, preguntarse si eran necesarios, y qué se puede hacer para disminuirlos y lograr un ahorro de al menos el 30% o 35%. Es el arte de la introspección financiera.";
            }
            if (pregunta.includes("minimalismo")) {
                return "El minimalismo financiero es un estilo de vida cuya filosofía es gastar únicamente en lo estrictamente indispensable. El objetivo es navegar ligero de cargas, liberando la mayor cantidad de recursos para dirigirlos al ahorro y la inversión.";
            }
            if (pregunta.includes("fire")) {
                return "FIRE (Financial Independence, Retire Early) es una travesía intensa. Se basa en 'poseer todo, usar nada': adquirir activos que generen ingresos (rentar una casa en Airbnb, un coche como Uber) para maximizar el ahorro y la inversión, buscando retirarse joven, entre los 38 y 45 años.";
            }
            if (pregunta.includes("presupuesto")) {
                return "Un presupuesto es el mapa de tu odisea financiera. Te ayuda a decirle a tu dinero a dónde ir. La regla 50/30/20 es un gran punto de partida: 50% para necesidades, 30% para deseos y 20% para ahorro e inversión.";
            }
            if (pregunta.includes("ahorro") && pregunta.includes("formal")) {
                return "El ahorro formal (en bancos, SOFIPOs) es como guardar tu tesoro en la bóveda de los dioses, protegido por el IPAB. El ahorro informal (debajo del colchón) es dejarlo en una playa desierta, a merced de piratas y tormentas. ¡Elige siempre un puerto seguro!";
            }
            if (pregunta.includes("ahorrar") || pregunta.includes("ahorro")) {
                return "Ahorrar es guardar un tesoro en un cofre seguro para tus metas cercanas. El primer paso es crear tu 'Fondo para Tormentas' (un fondo de emergencia) con el equivalente a 3 meses de tus gastos fijos. ¡Págate a ti primero siempre!";
            }
            if (pregunta.includes("invertir") || pregunta.includes("inversión")) {
                return "Invertir es plantar una semilla que crecerá con el tiempo. Para empezar, los CETES son como un puerto seguro, de bajo riesgo. Plataformas como GBM+ te permiten comprar pequeñas partes de grandes empresas. Recuerda: a mayor riesgo, mayor potencial de ganancia (y de pérdida).";
            }
            if (pregunta.includes("valor futuro") || pregunta.includes("vf") || pregunta.includes("valor presente") || pregunta.includes("vp")) {
                return "El Valor Futuro (VF) es un catalejo mágico que te muestra cuánto valdrá tu tesoro en el futuro. El Valor Presente (VP) te dice cuánto tesoro necesitas hoy para una gran expedición futura. En una hoja de cálculo, usa =VF(tasa, periodos, -pago_mensual) para ver tu riqueza crecer, y =VP(tasa, periodos, 0, -valor_futuro_deseado) para saber cuánto necesitas hoy.";
            }
            if (pregunta.includes("matemáticas") || pregunta.includes("fórmula") || pregunta.includes("interes simple") || pregunta.includes("pago")) {
                return "Las matemáticas son el lenguaje de los astros que guía a los navegantes. Para calcular el pago mensual de un préstamo en una hoja de cálculo, usa la función =PAGO(tasa_interes_mensual, numero_de_pagos, valor_prestamo). Ejemplo: para un préstamo de $10,000 a 12 meses con 20% de interés anual, la fórmula sería =PAGO(20%/12, 12, 10000).";
            }
            if (pregunta.includes("deuda")) {
                return "Existen dos tipos de deuda: la 'Deuda Sirena' (la que te hunde, como la de lujos innecesarios) y la 'Deuda Herramienta' (la que te ayuda a construir, como un crédito para una computadora para trabajar). ¡Evita el canto de las sirenas!";
            }
            if (pregunta.includes("cetes")) {
                return "Los CETES (Certificados de la Tesorería) son la forma más segura de invertir en México. Es como prestarle dinero al gobierno y él te lo devuelve con un pequeño interés. Puedes empezar desde $100 en cetesdirecto.com.";
            }
            if (pregunta.includes("riesgo")) {
                return "El riesgo en la inversión es la posibilidad de que el valor de tu dinero suba o baje. Hay perfiles de navegante: Conservador (prefiere puertos seguros como los CETES), Moderado (se aventura un poco más) y Arriesgado (busca tesoros en aguas profundas como la bolsa). ¿Qué tipo de navegante eres tú?";
            }
            if (pregunta.includes("buró") || pregunta.includes("buro") || pregunta.includes("historial crediticio")) {
                return "El Buró de Crédito es como el registro en la bitácora del capitán de todos tus viajes financieros. Un buen historial (un 'Mi Score' alto) te abre las puertas a puertos amigos (mejores créditos), mientras que un mal historial puede dejarte a la deriva. ¡Paga a tiempo y tu reputación de navegante será legendaria!";
            }
            if (pregunta.includes("cat") || pregunta.includes("gat")) {
                return "El CAT (Costo Anual Total) es el precio real de un crédito, ¡el monstruo completo con todos sus tentáculos (intereses, comisiones)! El GAT (Ganancia Anual Total) es el rendimiento real de una inversión después de la inflación. Busca un CAT bajo al pedir prestado y un GAT alto al invertir.";
            }
            if (pregunta.includes("interés compuesto") || pregunta.includes("interes compuesto")) {
                return "El interés compuesto es la magia más poderosa de los mares financieros. Es el 'efecto bola de nieve': tus ganancias generan más ganancias. Odiseo tardó 10 años en volver a Ítaca; con el interés compuesto, tu riqueza puede crecer exponencialmente con el tiempo. ¡La paciencia es tu mejor aliada!";
            }
            if (pregunta.includes("fraude") || pregunta.includes("estafa") || pregunta.includes("seguridad")) {
                return "¡Alerta, navegante! En los mares digitales hay 'cantos de sirena' (phishing, smishing) que buscan robar tu tesoro. Nunca compartas tus contraseñas o códigos. Si una oferta parece demasiado buena para ser verdad, es una trampa. Navega con cautela y desconfianza.";
            }
            if (pregunta.includes("meta") || pregunta.includes("objetivo")) {
                return "Toda odisea necesita un destino. Tus metas son tu Ítaca. Divídelas en: Corto Plazo (tesoros que quieres en menos de un año), Mediano Plazo (islas por conquistar en 1-5 años) y Largo Plazo (tu gran legado, como el retiro). Un mapa claro hace la travesía más fácil.";
            }
            if (pregunta.includes("fintech")) {
                return "Las Fintech son como nuevas y ágiles embarcaciones en el sistema financiero. Ofrecen servicios (créditos, cuentas) de forma 100% digital, a menudo con menos requisitos que los grandes navíos (bancos tradicionales). Son excelentes para iniciar tu travesía, pero siempre verifica que estén reguladas.";
            }
            if (pregunta.includes("gracias")) {
                return "¡De nada! Que los vientos soplen a tu favor en tu travesía financiera. Vuelve cuando necesites guía.";
            }
            
            // Respuesta por defecto
            return "Tu pregunta es intrigante, pero su respuesta aún está oculta para mí. Escribe 'ayuda' para ver la lista de temas sobre los que puedo aconsejarte.";
        }
        
        // --- Funciones para manejar la interfaz del chat ---
        function addMessage(text, sender) {
            const messageElement = document.createElement('div');
            messageElement.className = `p-3 rounded-lg max-w-lg animate-fade-in-up ${sender === 'user' ? 'user-message self-end text-right' : 'oraculo-message self-start'}`;
            messageElement.textContent = text;
            chatBox.appendChild(messageElement);
            chatBox.scrollTop = chatBox.scrollHeight; // Auto-scroll
        }

        function handleSend() {
            const userText = userInput.value;
            if (!userText) return;

            addMessage(userText, 'user');
            userInput.value = '';

            // Simula que el Oráculo está "pensando"
            setTimeout(() => {
                const oraculoText = getOraculoResponse(userText);
                if (oraculoText) {
                    addMessage(oraculoText, 'oraculo');
                }
            }, 800);
            
            // Animar el astrolabio
            astrolabio.style.transform = `rotate(${Math.random() * 360}deg)`;
        }

        sendButton.addEventListener('click', handleSend);
        userInput.addEventListener('keydown', (event) => {
            if (event.key === 'Enter') {
                handleSend();
            }
        });

        // Mensaje inicial del Oráculo
        window.addEventListener('load', () => {
            setTimeout(() => {
                addMessage("¡Bienvenido, navegante! Soy el Oráculo de Odisea. Hazme una pregunta sobre tu travesía financiera o escribe 'ayuda' para ver los temas que domino.", 'oraculo');
            }, 500);
        });
    </script>
</body>
</html>
